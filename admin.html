<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - DochÃ¡dzka</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
<style>
  body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    background: #f4f5f7;
    color: #333;
    display: flex;
  }

  .sidebar {
    width: 240px;
    background: #2b3a67;
    color: white;
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding-top: 20px;
  }

  .sidebar h2 {
    text-align: center;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .sidebar ul {
    list-style: none;
    padding: 0;
  }

  .sidebar li {
    padding: 14px 20px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .sidebar li:hover, .sidebar li.active {
    background: #3e4e88;
  }

  main {
    flex: 1;
    padding: 20px;
  }

  section {
    display: none;
    animation: fadeIn 0.3s ease;
  }

  section.active {
    display: block;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: center;
  }

  th {
    background: #dfe3ee;
  }

  .dochadzka { background: #e8f5e9; }
  .prestÃ¡vky { background: #fff3e0; }
  .pn { background: #fce4ec; }

  button {
    background: #3e4e88;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 10px;
  }

  button:hover {
    background: #2b3a67;
  }

  input {
    padding: 8px;
    margin-top: 5px;
    width: 200px;
  }
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar">
  <h2>ğŸ‘‘ Admin Panel</h2>
  <ul>
    <li id="viewAttendanceTab" class="active">ğŸ“… DochÃ¡dzka</li>
    <li id="viewBreaksTab">â˜• PrestÃ¡vky</li>
    <li id="viewPnTab">ğŸ¥ PN</li>
    <li id="manageUsersTab">ğŸ‘¤ SprÃ¡va zamestnancov</li>
    <li id="changePasswordTab">ğŸ”‘ Zmena hesla</li>
  </ul>
</aside>

<!-- HlavnÃ½ obsah -->
<main>
  <section id="view-attendance" class="active">
    <h2>ğŸ“… DochÃ¡dzka</h2>
    <table id="dochadzkaTable">
      <thead>
        <tr><th>Zamestnanec</th><th>DÃ¡tum</th><th>ÄŒas</th><th>Typ</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="view-breaks">
    <h2>â˜• PrestÃ¡vky</h2>
    <table id="prestÃ¡vkyTable">
      <thead>
        <tr><th>Zamestnanec</th><th>DÃ¡tum</th><th>ZaÄiatok</th><th>Koniec</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="view-pn">
    <h2>ğŸ¥ PN</h2>
    <table id="pnTable">
      <thead>
        <tr><th>Zamestnanec</th><th>Od</th><th>Do</th><th>PoznÃ¡mka</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="manage-users">
    <h2>ğŸ‘¤ SprÃ¡va zamestnancov</h2>
    <div id="usersList"></div>
  </section>

  <section id="change-password">
    <h2>ğŸ”‘ Zmena hesla</h2>
    <p>Zadaj novÃ½ e-mail a heslo pre zmenu:</p>
    <input type="email" id="newEmail" placeholder="NovÃ½ e-mail"><br>
    <input type="password" id="newPassword" placeholder="NovÃ© heslo"><br>
    <button onclick="changePassword()">ZmeniÅ¥</button>
    <p id="changePassMsg"></p>
  </section>
</main>

<script>
  // ğŸ”¥ Firebase konfigurÃ¡cia
  const firebaseConfig = {
    apiKey: "TU_DAJ_SVOJ_API_KEY",
    authDomain: "TU_DAJ_SVOJ_PROJEKT.firebaseapp.com",
    databaseURL: "https://TU_DAJ_SVOJ_PROJEKT.firebaseio.com",
    projectId: "TU_DAJ_SVOJ_PROJEKT",
    storageBucket: "TU_DAJ_SVOJ_PROJEKT.appspot.com",
    messagingSenderId: "000000000000",
    appId: "1:000000000000:web:abc123"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // ğŸ“‹ NaÄÃ­tanie dÃ¡t z databÃ¡zy
  function loadAttendance() {
    const ref = db.ref("dochadzka");
    ref.on("value", (snapshot) => {
      const tbody = document.querySelector("#dochadzkaTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach(userSnap => {
        userSnap.forEach(rec => {
          const d = rec.val();
          const row = `<tr><td>${d.zamestnanec}</td><td>${d.datum}</td><td>${d.cas}</td><td>${d.typ}</td></tr>`;
          tbody.innerHTML += row;
        });
      });
    });
  }

  function loadBreaks() {
    const ref = db.ref("prestÃ¡vky");
    ref.on("value", (snapshot) => {
      const tbody = document.querySelector("#prestÃ¡vkyTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach(userSnap => {
        userSnap.forEach(rec => {
          const d = rec.val();
          const row = `<tr><td>${d.zamestnanec}</td><td>${d.datum}</td><td>${d.zaciatok}</td><td>${d.koniec}</td></tr>`;
          tbody.innerHTML += row;
        });
      });
    });
  }

  function loadPN() {
    const ref = db.ref("pn");
    ref.on("value", (snapshot) => {
      const tbody = document.querySelector("#pnTable tbody");
      tbody.innerHTML = "";
      snapshot.forEach(userSnap => {
        userSnap.forEach(rec => {
          const d = rec.val();
          const row = `<tr><td>${d.zamestnanec}</td><td>${d.od}</td><td>${d.do}</td><td>${d.poznamka || ""}</td></tr>`;
          tbody.innerHTML += row;
        });
      });
    });
  }

  loadAttendance();
  loadBreaks();
  loadPN();

  // ğŸª„ PrepÃ­nanie sekciÃ­
  const tabs = document.querySelectorAll(".sidebar li");
  const sections = document.querySelectorAll("main section");
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      sections.forEach(s => s.classList.remove("active"));
      tab.classList.add("active");

      if (tab.id === "manageUsersTab") document.getElementById("manage-users").classList.add("active");
      if (tab.id === "viewAttendanceTab") document.getElementById("view-attendance").classList.add("active");
      if (tab.id === "viewBreaksTab") document.getElementById("view-breaks").classList.add("active");
      if (tab.id === "viewPnTab") document.getElementById("view-pn").classList.add("active");
      if (tab.id === "changePasswordTab") document.getElementById("change-password").classList.add("active");
    });
  });

  // ğŸ”‘ Zmena hesla
  function changePassword() {
    const newEmail = document.getElementById("newEmail").value;
    const newPass = document.getElementById("newPassword").value;
    const msg = document.getElementById("changePassMsg");
    msg.textContent = "Zmena prebieha...";
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        user.updateEmail(newEmail).then(() => {
          return user.updatePassword(newPass);
        }).then(() => {
          msg.textContent = "ÃšspeÅ¡ne zmenenÃ©!";
        }).catch(err => {
          msg.textContent = "Chyba: " + err.message;
        });
      } else msg.textContent = "Nie si prihlÃ¡senÃ½!";
    });
  }
</script>
</body>
</html>






